@ <stdio.hdr>

@ "expr.hdr"
@ "gen.hdr"
@ "ustr.hdr"

fn main() {
    local expr: -> Expr;

    local _2: -> UStr = UStrCreate("2");
    local _3: -> UStr = UStrCreate("3");
    local _f: -> UStr = UStrCreate("f");
    local _x: -> UStr = UStrCreate("x");

    expr = createBinaryExpr(EXPR_SUB,
                            createBinaryExpr(EXPR_DIV,
                                             createIntegerExpr(_2),
                                             createIntegerExpr(_3)),
                            createCallExpr(_f));
    printExprLatexTree(expr);
    expr = createBinaryExpr(EXPR_ASSIGN,
                            createDerefExpr(
                                createAddrExpr(
                                    createIdentifierExpr(_x))),
                            expr);
    printExprLatexTree(expr);
    printf("\n");

    genReleaseReg(loadExpr(expr));

    releaseExpr(expr);
}
